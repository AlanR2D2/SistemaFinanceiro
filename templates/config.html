{% extends "base.html" %}
{% block title %}Configurações{% endblock %}
{% block header %}Configurações{% endblock %}

{% block content %}
<style>
  :root{
    --mw-blue:#1b2aa6;
    --mw-blue-2:#15208a;
    --mw-border:#e5e7eb;
    --mw-bg:#f5f7fb;
  }
  .cfg-page{ background: var(--mw-bg); padding:18px; border-radius:16px; }
  .cfg-card{
    background:#fff;
    border:1px solid var(--mw-border);
    border-radius:14px;
    overflow:hidden;
    max-width: 920px;
  }
  .cfg-h{
    padding:16px 18px;
    border-bottom:1px solid var(--mw-border);
    display:flex;
    justify-content:space-between;
    align-items:center;
    gap:12px;
    flex-wrap:wrap;
  }
  .cfg-title{ font-size:20px; font-weight:900; color:#0f172a; }
  .cfg-sub{ font-size:12px; color:#64748b; margin-top:2px; }
  .cfg-b{ padding:16px 18px; }
  .grid{
    display:grid;
    grid-template-columns: 1fr 1fr;
    gap:12px;
  }
  .field label{ display:block; font-size:12px; color:#475569; margin-bottom:6px; font-weight:800; }
  .inp{
    width:100%;
    height: 40px;
    padding:0 12px;
    border:1px solid var(--mw-border);
    border-radius:10px;
    outline:none;
    background:#fff;
  }
  .inp:focus{ border-color: rgba(27,42,166,.55); box-shadow: 0 0 0 3px rgba(27,42,166,.12); }
  .sep{
    margin: 14px 0;
    border-top: 1px solid var(--mw-border);
  }
  .btn{
    height:40px;
    padding:0 14px;
    border-radius:10px;
    border:1px solid var(--mw-border);
    background:#f8fafc;
    color:#0f172a;
    font-weight:800;
    cursor:pointer;
  }
  .btn-blue{
    background: var(--mw-blue);
    color:#fff;
    border-color: var(--mw-blue-2);
  }
  .btn-blue:hover{ background: var(--mw-blue-2); }
  .alert{
    margin: 12px 18px 0;
    padding: 12px 14px;
    border-radius: 12px;
    border: 1px solid rgba(239,68,68,.25);
    background: rgba(239,68,68,.08);
    color:#7f1d1d;
    font-weight:800;
  }
  .ok{
    margin: 12px 18px 0;
    padding: 12px 14px;
    border-radius: 12px;
    border: 1px solid rgba(22,163,74,.22);
    background: rgba(22,163,74,.08);
    color:#14532d;
    font-weight:800;
  }
  .hint{ margin-top:8px; font-size:12px; color:#64748b; }
  @media (max-width: 820px){
    .grid{ grid-template-columns: 1fr; }
  }
</style>

<div class="cfg-page">
  <div class="cfg-card">
    <div class="cfg-h">
      <div>
        <div class="cfg-title">Meus dados</div>
        <div class="cfg-sub">Atualize nome, e-mail e senha.</div>
      </div>
      <div style="font-size:12px; color:#64748b; font-weight:800;">
        Login: {{ user.login }}
      </div>
    </div>

    {% if error %}
      <div class="alert">Atenção: {{ error }}</div>
    {% endif %}
    {% if ok %}
      <div class="ok">{{ ok }}</div>
    {% endif %}

    <div class="cfg-b">
      <form method="post" action="{{ url_for('config_post') }}">
        <div class="grid">
          <div class="field">
            <label>Nome</label>
            <input class="inp" name="nome" value="{{ user.nome or '' }}" placeholder="Seu nome">
          </div>
          <div class="field">
            <label>Email</label>
            <input class="inp" name="email" value="{{ user.email or '' }}" placeholder="email@dominio.com">
          </div>
        </div>

        <div class="sep"></div>

        <div style="font-weight:900; color:#0f172a; margin-bottom:8px;">Trocar senha</div>
        <div class="grid">
          <div class="field">
            <label>Senha atual</label>
            <input class="inp" name="senha_atual" type="password" placeholder="Senha atual">
          </div>
          <div class="field">
            <label>Nova senha</label>
            <input class="inp" name="senha_nova" type="password" placeholder="Nova senha (mín. 6 caracteres)">
          </div>
          <div class="field">
            <label>Confirmar nova senha</label>
            <input class="inp" name="senha_nova2" type="password" placeholder="Confirme a nova senha">
          </div>
          <div class="field" style="display:flex; align-items:end; justify-content:flex-end;">
            <button class="btn btn-blue" type="submit" style="width:100%;">Salvar alterações</button>
          </div>
        </div>

        
        <div class="hint">
          Se você não preencher os campos de senha, somente nome/e-mail serão atualizados.
        </div>
      </form>
    </div>
  </div>
</div>
{% endblock %}
